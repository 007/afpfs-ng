Upcoming features:

* Multiple users: have one afpfsd running and multiple uids doing mounts

* Icon support:
  - full query/result support
  - retrieval tool: a userspace app that can parse icons from resource forks

* Complete implementation of AFP 3.2
  - pretty much every function needs testing and correcting

* Proper utf8 support
  - need per-volume character encoding
  - need generalized filename translation (check out netatalk)

* AFP 2.x support
  - desktop database support

* More UAMs
  - missing DHX2 (coming)
  - ClientKRB
  - reconnection

* Being able to change password

* Extended attributes 

* Ongoing performance tweaking
  - measurements, comparisons to other clients
  - asynchronous unlocking
  - use rx and tx quantums properly

* GUI interface for status messages

* libafpclient.so: a shared library for ease of extension (eg. gnome-vfs2)

* use locking primitives in fuse 2.6.1


Development:

* When running afpfsd under gdb, unmount doesn't work because of the use of 
  signals


Protocol bugs:

* If a DSI stream gets broken or there's a protocol error, the connection
  should be reset

* We don't currently handle reconnect flags or timeouts for DSI attention
  packets

Useability:
* afp_client should check syntax more closely

Coding
1 stop using mutex for startup end detection, use pthread_join
1 getuid needs to be getuid_r, etal
2 make apple_translate into const char 

Mounting:
1 don't handle return codes properly

* Need better error messages when there's a connection refused problem

* when server is down on mount, version of 0 problem reported to client.
This is easy to reproduce when mounting both local netatalk and remote OSx

* if perms on mountpoint are wrong, it isn't reported

* do correct address/signature matching; right now we don't actually use
  the signature.


Packaging and polish:

* Make startup scripts (not much point without multi-user support)

* Packages for:
  - FC5, FC6, FC7
  - Debian, Ubuntu

* AFP 2.2 bugs:
  - UTF8 flag is now server-specific, but it should be volume-specific

1 test suite

Leak:
1 large memory leaks (check did)
2 status leaks memory ?
2 valgrind

Protocol:
1 change afp_readdir() to allocate buffer in fuse_int.c
1 when a file is busy, afpDelete fails
2 get_dirid cache:
   -is_dir
1 usage of rx quantum?
1 check if map caching works
2 in getsrvrmsg, check version > 3 to ensure that we're UTF8
3 name mapping translation is not correct, see docs
3 use host version list in pick_version
4 handle zzz
1 problem with writing a large file and ls at the same time
1 with dir in subdir, getfiledirparms with "\000foo"
1 never use did cache (use valgrind to make sure there's no leaking)

Need real OS X:
1 getsrvrmsg against OSX, bitmap error, need real trace 
2 special files with mknod, devices
1 weirdness with mkdir, then copying files into dir, only 3.2
- "Could not get the filebase I just looked for.  Weird." when playing in
  subdirs
1 check locking


Control:
1 warnings
1 copyright notices
1 debug messages
1 on suspend/resume/suspend/status, get "Unknown fd" problem
2 when server is already down, client complains "Server going down"
1 server breakage handling: (probably okay)
  - silent death of server
  - implement sessions
  - when logging in

Metadata
1 copying resources doesn't work
1 comments broken again

Docs
1 mounting
1 unmounting
1 manpages
2 document quantum calculation
1 fuse compatibility
1 crypto requirements

Before release:
- check against fuse 2.5.3, 2.6.1
- update docs enough to get running
- review and rewrite the bugs
- copyright notices
- is already running
- error reported on ls
1024 in afp_write()

